{"generator":"Code Snippets v2.10.1.1","date_created":"2018-08-30 07:56","snippets":[{"name":"Post l\u00f6schen inkl. Featured Image","desc":"In einem aktuellen Projekt musste ich Posts erstellen und Bilder vom Frontend hochladen. Daher musste ich diese Anh\u00e4nge auch entfernen, wenn Personen die Beitr\u00e4ge l\u00f6schten. Ansonsten h\u00e4tten wir viele Orphan-Bilder, die viel wertvollen Platz in unserer WordPress-Mediathek verbrauchen. Wenn Sie dieses Snippet zur functions.php Ihres WordPress-Themes hinzuf\u00fcgen, werden vordefinierte Bilder entfernt, wenn Sie einen Beitrag mit dem Hook before_delete_post l\u00f6schen. Sie sollten vorsichtig mit diesem Snippet sein, wenn Sie das gleiche Bild an mehrere Beitr\u00e4ge als das vorgestellte Bild anh\u00e4ngen, also denken Sie daran. Eine andere Sache zu erinnern ist, dass Medien Bibliothek Elemente gel\u00f6scht werden, wenn der Beitrag gel\u00f6scht wird nicht in den Papierkorb, so m\u00fcssen Sie den Beitrag vollst\u00e4ndig l\u00f6schen, um das Bild entfernt zu sehen.\r\n\r\n<a href=\"http:\/\/wpsnipp.com\/index.php\/attachment\/remove-featured-image-deleting-post\/\" target=\"_blank\" rel=\"noopener\">http:\/\/wpsnipp.com\/index.php\/attachment\/remove-featured-image-deleting-post\/<\/a>","tags":["multimedia","dashboard"],"scope":"admin","code":"add_action( 'before_delete_post', 'wps_remove_attachment_with_post', 10 );\r\nfunction wps_remove_attachment_with_post($post_id)\r\n{\r\n        if(has_post_thumbnail( $post_id ))\r\n        {\r\n          $attachment_id = get_post_thumbnail_id( $post_id );\r\n          wp_delete_attachment($attachment_id, true);\r\n        }\r\n}"}]}